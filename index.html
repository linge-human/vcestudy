<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VCE Minimal</title>
  <style>
    body {
      font-family: 'SF Mono', monospace;
      background: #fff;
      color: #000;
      min-height:100vh;
      margin:0; padding:0;
    }
    .sidebar {
      min-width: 220px; max-width: 240px;
      background: #fafafa;
      border-right: 2px solid #000;
      padding: 0 18px;
      display: flex; flex-direction: column;
      height: calc(100vh);
      justify-content: flex-start;
    }
    .sidebar input, .sidebar textarea {
      width: 100%;
      margin: 18px 0;
      font-size: 1rem;
      padding: 8px 8px;
      border: 1.5px solid #ccc;
      background: #fff;
      font-family: inherit;
    }
    .sidebar label { font-size: 0.9rem; color:#333;margin-top: 16px;}
    .main-container { display: flex; min-height:100vh;}
    .chat-area { flex:1; display: flex; flex-direction: column; background: #fff; }
    .chat-header { padding: 12px 22px; border-bottom:1px solid #e5e5e5; font-size:1rem;font-weight:500;}
    .chat-messages { flex:1;padding:20px;overflow-y:auto;}
    .message {margin-bottom:20px;max-width:95%;}
    .message.user {margin-left: auto;text-align:right;}
    .message.assistant {margin-right: auto;}
    .message-content { padding:14px 22px; font-size:1rem;line-height:1.7;}
    .message.user .message-content { background: #000; color: #fff; border:0;}
    .message.assistant .message-content { background:#f9f9f9; color:#111;border:0;}
    .message-meta { font-size:0.68rem;color:#bbb; margin-top:7px;font-weight:500; }
    .input-area {padding:18px 22px; background:#fafafa; border-top:1.5px solid #ececec;}
    .input-container { display: flex; gap:8px;}
    .chat-input { flex:1; padding:12px; font-size:1rem; border: 1.5px solid #ccc; background: #fff; font-family: inherit;}
    .send-btn { padding: 12px 22px; background: #000; color: #fff; border:0;font-family:inherit;font-size:1rem;font-weight:500;}
    .send-btn:hover { background: #222;}
    ::-webkit-scrollbar { width: 4px; background: #f5f5f5; }
    ::-webkit-scrollbar-thumb { background: #ddd; }
    @media (max-width: 768px) {
      .main-container { flex-direction: column;}
      .sidebar {max-width: 100vw;}
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="sidebar">
      <label for="subjects" style="margin-top:32px;">My Subjects</label>
      <input type="text" id="subjects" placeholder="e.g. Methods, Chem, Eng Lang" value="Biology, Chemistry, Physics, Math Methods, Specialist Maths">
      <label for="focus">Study Focus</label>
      <textarea id="focus" placeholder="e.g. Cellular Respiration, Equilibrium..." rows="2"></textarea>
    </div>
    <div class="chat-area">
      <div class="chat-header" id="header-focus"></div>
      <div class="chat-messages" id="chat-messages"></div>
      <div class="input-area">
        <div class="input-container">
          <textarea class="chat-input" id="chat-input" placeholder="Ask... (Ctrl+Enter to send)" rows="2"></textarea>
          <button class="send-btn" id="send-btn">Send</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    class MinimalVCEAssistant {
      constructor() {
        this.subjects = ['Biology', 'Chemistry', 'Physics', 'Math Methods', 'Specialist Maths'];
        this.studyFocus = '';
        this.memory = [];
        this.humanTone = true;
        this.vceReference = "Based on current VCAA study designs and the latest textbooks.";
        this.init();
      }
      init() {
        document.getElementById('subjects').addEventListener('input', e => {
          this.subjects = e.target.value.split(',').map(s=>s.trim()).filter(Boolean);
        });
        document.getElementById('focus').addEventListener('input', e => {
          this.studyFocus = e.target.value.trim();
          this.updateHeader();
        });
        this.updateHeader();
        document.getElementById('send-btn').addEventListener('click', () => this.send());
        document.getElementById('chat-input').addEventListener('keypress', e => {
          if (e.key === 'Enter' && e.ctrlKey) this.send();
        });
        document.getElementById('focus').dispatchEvent(new Event('input'));
      }
      updateHeader() {
        let focus = this.studyFocus ? `Focus: ${this.studyFocus}` : "Minimal VCE Study Tool";
        document.getElementById('header-focus').textContent = focus;
      }
      async send() {
        const input = document.getElementById('chat-input');
        const message = input.value.trim();
        if (!message) return;
        this.addMessage(message, 'user');
        input.value = '';
        try {
          let response = await this.generateResponse(message);
          this.addMessage(response, 'assistant');
        } catch (e) {
          this.addMessage('Error: ' + e.message, 'assistant');
        }
      }
      addMessage(content, who) {
        const m = document.createElement('div');
        m.className = 'message ' + who;
        const mcont = document.createElement('div');
        mcont.className = 'message-content';
        mcont.innerHTML = content;
        m.appendChild(mcont);
        document.getElementById('chat-messages').appendChild(m);
        document.getElementById('chat-messages').scrollTop = document.getElementById('chat-messages').scrollHeight+200;
        this.memory.push({content,who});
      }
      async generateResponse(userMsg) {
        await new Promise(r=>setTimeout(r, 600+Math.random()*400));
        const memory = this.memory.filter(x=>x.who==='user').map(x=>x.content);
        const focus = this.studyFocus || '';
        return this.humanStyleReply(userMsg, focus, memory);
      }
      humanStyleReply(userMsg, focus, memory) {
        let referenceString='';
        if(memory.length > 1){
          let prev = memory.slice(-2,-1)[0].toLowerCase();
          if(prev && userMsg.toLowerCase().includes('same') || userMsg.toLowerCase().includes('again')){
            referenceString = "Like you asked earlier, ";
          }
        }
        let reply = "";
        if(focus) {
          reply += `<strong>Let’s stick tight to your focus: ${focus}.</strong><br>`;
        }
        const reference = "As covered in the latest VCE curriculum and official texts. ";
        if(userMsg.toLowerCase().includes('explain')) {
          reply += referenceString + "Here's a simple take: ";
          reply += this.friendlyExplain(userMsg, focus);
        }
        else if(userMsg.toLowerCase().includes('practice')) {
          reply += "Alright, I’ll give you a practice question directly tied to ";
          reply += focus ? focus : "your topic";
          reply += ", just like VCAA would:<br><br>";
          reply += this.simplePracticeQuestion(focus || userMsg);
        }
        else if(userMsg.toLowerCase().includes('summary') || userMsg.toLowerCase().includes('summarise')) {
          reply += "Summary time. ";
          reply += this.simpleSummary(focus || userMsg);
        }
        else if(userMsg.toLowerCase().includes('how') || userMsg.toLowerCase().includes('what') ||
                userMsg.toLowerCase().includes('why')) {
          reply += this.friendlyExplain(userMsg, focus);
        }
        else {
          reply += this.friendlyExplain(userMsg, focus);
        }
        reply += `<br><span style="font-size:0.83em;color:#aaa;">${reference}</span>`;
        return reply;
      }
      friendlyExplain(query, focus) {
        let main = focus ? focus : query.replace(/explain/i,'').trim();
        if(main.length < 3) main = "this concept";
        return `Alright, let’s look right at <b>${main}</b>. Here’s how I’d show it if we had the board in front of us: I’d start by showing you what’s actually happening, then step through how VCE expects you to use it in an exam setting. If any bit feels fuzzy, ask, and I’ll teach it another way.`;
      }
      simplePracticeQuestion(focus) {
        return `“In a typical VCE question about <b>${focus}</b>, what would happen if ...” (let me know if you want a full worked solution, a Socratic hint, or just the answer)`;
      }
      simpleSummary(focus) {
        return `If you had to teach <b>${focus}</b> right now, you’d start by remembering its core idea and what VCE textbooks show as the required outcome. If you get stuck, think: “what’s the real-world link, and what’s the examiner actually testing?” That approach works for any topic.`;
      }
    }
    new MinimalVCEAssistant();
  </script>
</body>
</html>
